---
transactionNotFound:
  change:
    - NOT_FOUND
    - NOT_FOUND
  changeExplanation: ""
  selfServiceErrorCodeId: TRANSACTION_NOT_FOUND
  services:
    TransactionService:
      - getTransactionByEventId
      - getTransactionById

malformedPackageId:
  change:
    - INVALID_ARGUMENT
    - INVALID_ARGUMENT
  changeExplanation: ""
  selfServiceErrorCodeId: MALFORMED_PACKAGE_ID
  services:
    PackageService:
      - getPackage
      - getPackageStatus

packageNotFound:
  change:
    - NOT_FOUND
    - NOT_FOUND
  changeExplanation: ""
  selfServiceErrorCodeId: PACKAGE_NOT_FOUND
  services:
    PackageService:
      - getPackage

versionServiceInternalError:
  change:
    - INTERNAL
    - INTERNAL
  changeExplanation: ""
  selfServiceErrorCodeId: VERSION_SERVICE_INTERNAL_ERROR
  services:
    VersionService:
      - getLedgerVersion

duplicateCommandException:
  change:
    - ALREADY_EXISTS
    - ALREADY_EXISTS
  changeExplanation: ""
  selfServiceErrorCodeId: DUPLICATE_COMMAND
  services:
    SubmissionService:
      - submit

ledgerIdMismatch:
  change:
    - NOT_FOUND
    - NOT_FOUND
  changeExplanation: ""
  selfServiceErrorCodeId: LEDGER_ID_MISMATCH
  services:
    SandboxResetService:
      - reset
    TimeService:
      - getTimeSource
      - setTime
    CommandSubmissionService:
      - submit
    CommandService:
      - submitAndWaitForTransactionTree
      - submitAndWaitForTransaction
      - submitAndWaitForTransactionId
      - submitAndWait
    CommandCompletionService:
      - completionStream
      - completionEnd
    LedgerConfigurationService:
      - getLedgerConfiguration
    PackageService:
      - listPackages
      - getPackage
      - getPackageStatus
    TransactionService:
      - getTransactions
      - getTransactionTreesSource
      - getLedgerEnd
      - getTransactionById
      - getFlatTransactionById
      - getFlatTransactionByEventId
      - getTransactionByEventId
    ActiveContractsService:
      - getActiveContracts

missingField:
  change:
    - INVALID_ARGUMENT
    - INVALID_ARGUMENT
  changeExplanation: ""
  selfServiceErrorCodeId: MISSING_FIELD
  services:
    CommandSubmissionService:
      - submit
    CommandService:
      - submitAndWaitForTransactionTree
      - submitAndWaitForTransaction
      - submitAndWaitForTransactionId
      - submitAndWait
    CommandCompletionService:
      - completionStream
    TransactionService:
      - getFlatTransactionById
      - getFlatTransactionByEventId
      - getTransactionById
      - getTransactions
      - getTransactionByEventId
      - getTransactionTrees
      - getTransactions
    ActiveContractsService:
      - getActiveContracts
    ConfigManagementService:
      - setTimeModel
    TimeService:
      - setTime

invalidArgument:
  change:
    - INVALID_ARGUMENT
    - INVALID_ARGUMENT
  changeExplanation: ""
  selfServiceErrorCodeId: INVALID_ARGUMENT
  services:
    CommandSubmissionService:
      - submit
    CommandService:
      - submitAndWaitForTransactionTree
      - submitAndWaitForTransaction
      - submitAndWaitForTransactionId
      - submitAndWait
    CommandCompletionService:
      - completionStream
    TransactionService:
      - getTransactionTrees
      - getTransactions
      - getTransactionById
      - getFlatTransactionById
      - getFlatTransactionByEventId
      - getTransactionByEventId
    ActiveContractsService:
      - getActiveContracts
    ConfigManagementService:
      - setTimeModel
    PackageManagementService:
      - uploadDarFile
    ParticipantPruningService:
      - prune
    PartyManagementService:
      - allocateParty
    TimeService:
      - setTime

invalidArgumentWasNotFound:
  change:
    - NOT_FOUND
    - INVALID_ARGUMENT
  changeExplanation: "INVALID_ARGUMENT is now returned to indicate the received request contains an invalid values."
  selfServiceErrorCodeId: INVALID_ARGUMENT
  services:
    TransactionService:
      - getTransactionByEventId
      - getFlatTransactionByEventId
    GrpcHealthService:
      - check
      - watch

offsetOutOfRange_was_invalidArgument:
  change:
    - INVALID_ARGUMENT
    - OUT_OF_RANGE
  changeExplanation: "OUT_OF_RANGE is now returned to indicate the supplied offset is out of range."
  selfServiceErrorCodeId: REQUESTED_OFFSET_OUT_OF_RANGE
  services:
    ParticipantPruningService:
      - prune
    TransactionService:
      - getTransactionTrees
      - getTransactions

nonHexOffset:
  change:
    - INVALID_ARGUMENT
    - INVALID_ARGUMENT
  changeExplanation: ""
  selfServiceErrorCodeId: NON_HEXADECIMAL_OFFSET
  services:
    ParticipantPruningService:
      - prune

invalidField:
  change:
    - INVALID_ARGUMENT
    - INVALID_ARGUMENT
  changeExplanation: ""
  selfServiceErrorCodeId: INVALID_FIELD
  services:
    CommandCompletionService:
      - completionStream
      - submit
    CommandService:
      - submitAndWaitForTransactionTree
      - submitAndWaitForTransaction
      - submitAndWaitForTransactionId
      - submitAndWait
    ActiveContractsService:
      - getActiveContracts
    TransactionService:
      - getTransactions
      - getFlatTransactionByEventId
      - getTransactionByEventId
      - getTransactionTrees
    CommandSubmissionService:
      - submit

offsetOutOfRange:
  change:
    - OUT_OF_RANGE
    - OUT_OF_RANGE
  changeExplanation: ""
  selfServiceErrorCodeId: REQUESTED_OFFSET_OUT_OF_RANGE
  services:
    CommandCompletionService:
      - completionStream
    TransactionService:
      - getTransactions
      - getTransactionTrees

isTimeoutUnknown_wasAborted:
  change:
    - ABORTED
    - DEADLINE_EXCEEDED
  changeExplanation: "DEADLINE_EXCEEDED is now returned to indicate a time out was reached."
  selfServiceErrorCodeId: REQUEST_TIME_OUT
  services:
    ConfigManagementService:
      - setTimeModel
    PackageManagementService:
      - uploadDarFile
    PartyManagementService:
      - allocateParty

packageUploadRejected:
  change:
    - INVALID_ARGUMENT
    - FAILED_PRECONDITION
  changeExplanation: "FAILED_PRECONDITION is now returned to indicate the package upload was rejected."
  selfServiceErrorCodeId: PACKAGE_UPLOAD_REJECTED
  services:
    PackageManagementService:
      - uploadDarFile

configurationEntryRejected:
  change:
    - ABORTED
    - FAILED_PRECONDITION
  changeExplanation: "FAILED_PRECONDITION is now returned to indicate the configuration update was rejected."
  selfServiceErrorCodeId: CONFIGURATION_ENTRY_REJECTED
  services:
    ConfigManagementService:
      - setTimeModel

permissionDenied:
  change:
    - PERMISSION_DENIED
    - PERMISSION_DENIED
  changeExplanation: ""
  selfServiceErrorCodeId: PERMISSION_DENIED
  services:
    ALL:
      - Assuming it for all endpoints

unauthenticatedMissingJwtToken:
  change:
    - UNAUTHENTICATED
    - UNAUTHENTICATED
  changeExplanation: ""
  selfServiceErrorCodeId: UNAUTHENTICATED
  services:
    ALL:
      - Assuming it for all endpoints

internalAuthenticationError:
  change:
    - INTERNAL
    - INTERNAL
  changeExplanation: ""
  selfServiceErrorCodeId: INTERNAL_AUTHORIZATION_ERROR
  services:
    ALL:
      - Assuming it for all endpoints

missingLedgerConfig:
  change:
    - UNAVAILABLE
    - NOT_FOUND
  changeExplanation: "NOT_FOUND is now returned to Ledger configuration was not found."
  selfServiceErrorCodeId: LEDGER_CONFIGURATION_NOT_FOUND
  services:
    ConfigManagementService:
      - setTimeModel
    SubmissionService:
      - submit
    CommandSubmissionService:
      - submit
    CommandService:
      - submitAndWaitForTransactionTree
      - submitAndWaitForTransaction
      - submitAndWaitForTransactionId
      - submitAndWait

missingLedgerConfigUponRequest:
  change:
    - NOT_FOUND
    - NOT_FOUND
  changeExplanation: ""
  selfServiceErrorCodeId: LEDGER_CONFIGURATION_NOT_FOUND
  services:
    ConfigManagmentService:
      - getTimeModel

participantPrunedDataAccessed:
  change:
    - NOT_FOUND
    - OUT_OF_RANGE
  changeExplanation: "OUT_OF_RANGE is now returned to indicate attempted accesses to data that has alraedy been pruned."
  selfServiceErrorCodeId: PARTICIPANT_PRUNED_DATA_ACCESSED
  services:
    CommandCompletionService:
      - completionStream
    TransactionService:
      - getTransactions
      - getTransactionTrees
    ActiveContractsService:
      - getActiveContracts
    ReadOnlySqlLedgerWithMutableCache:
      - UNFINISHED - hard to track down where this cache is used

serviceNotRunning:
  change:
    - UNAVAILABLE
    - UNAVAILABLE
  changeExplanation: ""
  selfServiceErrorCodeId: SERVICE_NOT_RUNNING
  services:
    CommandService:
      - submitAndWaitForTransactionTree
      - submitAndWaitForTransaction
      - submitAndWaitForTransactionId
      - submitAndWait
    LedgerIdentityService:
      - getLedgerIdentity

trackerFailure:
  change:
    - INTERNAL
    - INTERNAL
  changeExplanation: ""
  selfServiceErrorCodeId: LEDGER_API_INTERNAL_ERROR
  services:
    CommandService:
      - submitAndWaitForTransactionTree
      - submitAndWaitForTransaction
      - submitAndWaitForTransactionId
      - submitAndWait
